define("model/user",[],function(){function e(){this.conatinerSelector=".user-login",this.statusAttr="data-islogin",this.configSelector="#aj-user-sign-config"}return e.prototype={isLogin:function(){var e=$(this.configSelector)[0];if(!e.isLogin)return!1;try{return JSON.parse(e.isLogin.value)}catch(t){return!1}},getUserid:function(){var e=$(this.configSelector)[0];return e.userid?e.userid.value:0},getUserimg:function(){var e=$(this.configSelector)[0];return e.img?e.img.value:""},getNickname:function(){var e=$(this.configSelector)[0];return e.nickname?e.nickname.value:""}},new e}),define("ui/comment",["model/user"],function(e){function t(){this.className="aj-comment-ui-area",this.groupIdAttr="data-grounp-id",this.hasRenderClassName="aj-comment-ui-area-has-rendered",this.commentsLoadUrl="/comment/get"}return t.prototype={getGroupId:function(e){return e.attr(this.groupIdAttr)},render:function(){var e=$("."+this.className),t=this;e.each(function(){t.renderDom(this)})},renderDom:function(e){this.hasRendered(e)||($(e).addClass(this.hasRenderClassName),this.renderHeader(e),this.renderComments(e))},renderHeader:function(t){var n=$("<div>"),r=$("<h3>");textarea=$("<textarea>"),btn=$("<button>"),r.html("用户评论:"),n.append(r),e.isLogin()?textarea.attr("placeholder","说点什么呗~"):(textarea.attr("placeholder","您未登录, 无法评论"),textarea.attr("disabled","true")),textarea.addClass("form-control"),n.append(textarea),btn.html("提交"),btn.addClass("form-control"),btn.css({width:"80px"}),n.append(btn),$(t).append(n)},renderComments:function(e){jDom=$(e);var t=$("<div>"),n=this;$.ajax({url:this.commentsLoadUrl+"?commentsGroupId="+this.getGroupId(jDom),type:"GET",dataType:"json",success:function(e){var r;if(e.isok)for(r=0;r<e.data.length;r++)t.append(n.renderCommentJsonToDom(e.data[r]))},error:function(){t.html("加载失败"),t.css({padding:"20px",textAlign:"center"})},complete:function(){jDom.append(t)}})},renderCommentJsonToDom:function(e){var t=$("<div>");return t.html(e.userid+":"+e.content),t},hasRendered:function(e){return $(e).hasClass(this.hasRenderClassName)}},new t}),require(["ui/comment","model/user"],function(){}),define("requirejs-main",function(){});